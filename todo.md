# SF Admin Quiz - TODO

- [x] テーマカラーをSalesforceブランドカラーに更新
- [x] 過去問データの抽出（120問）
- [x] 過去問データをテスト範囲カテゴリで分類
- [x] QuizContextの実装（状態管理）
- [x] ホーム画面の実装（スコア履歴・弱点表示）
- [x] クイズ画面の実装（問題・選択肢・フィードバック・解説）
- [x] 結果画面の実装（スコア・カテゴリ別正解率・弱点分析）
- [x] 統計画面の実装（履歴リスト・カテゴリ別正解率）
- [x] タブナビゲーションの設定（クイズ・統計）
- [x] AsyncStorageによるスコア履歴の永続化
- [x] アプリアイコン・ロゴの生成
- [x] ブランディング設定（app.config.ts更新）
- [x] ハプティクスフィードバックの追加
- [x] 全フローのエンドツーエンド動作確認
- [x] 苦手克服モード：不正解問題の抽出・保存機能
- [x] 苦手克服モード：ホーム画面にモード選択UI追加
- [x] 苦手克服モード：クイズ画面を苦手克服モード対応
- [x] 苦手克服モード：結果画面を苦手克服モード対応
- [x] 苦手克服モード：テスト実装
- [x] クイズ画面のレンダリング中の状態更新エラーを修正
- [x] エラーメッセージを日本語化
- [x] カテゴリフィルター機能：QuizContextに選択カテゴリ状態を追加
- [x] カテゴリフィルター機能：ホーム画面にカテゴリ選択UIを追加
- [x] カテゴリフィルター機能：クイズ画面をフィルター対応に更新
- [x] カテゴリフィルター機能：テスト実装
- [x] Salesforce公式過去問リソースの調査
- [x] Web上の信頼できるソースから過去問を収集
- [x] 重複排除と品質チェック
- [x] 250問規模のデータセットを構築
- [x] カテゴリ分類の再確認
- [x] アプリに統合・テスト
- [x] 既存120問を類似問題に編集
- [x] 新規問題130問を作成
- [x] 重複排除と品質チェック
- [x] 250問規模のデータセットを構築
- [x] カテゴリ分類の確認

## 公開準備フェーズ

- [ ] 市場調査レポート確認（MARKET_RESEARCH.md）
- [ ] 価格設定の最終決定（推奨：¥980買い切り型）
- [ ] App Store Connect アカウント作成
- [ ] Google Play Developer Console アカウント作成
- [ ] EAS ビルド実施（iOS + Android）
- [ ] App Store スクリーンショット・説明文の準備
- [ ] Google Play Store スクリーンショット・説明文の準備
- [ ] プライバシーポリシー・利用規約の作成
- [ ] App Store への審査提出
- [ ] Google Play Store への審査提出
- [ ] 公開後のマーケティング実施

## ユーザー認証・クラウドデータ同期フェーズ

- [x] サーバー側：ユーザーテーブル作成（Drizzle ORM）
- [x] サーバー側：クイズ結果テーブル作成
- [x] サーバー側：ユーザー認証API実装（Manus OAuth）
- [x] サーバー側：クイズ結果保存API実装
- [x] サーバー側：クイズ結果取得API実装
- [x] サーバー側：成績統計API実装
- [ ] クライアント側：ログイン画面実装
- [ ] クライアント側：認証状態管理（Context）
- [x] クライアント側：AsyncStorage → サーバー同期機能
- [ ] クライアント側：オフライン対応（ローカルキャッシュ）
- [ ] テスト用ユーザーアカウント作成
- [ ] エンドツーエンドテスト（複数デバイス）
- [ ] セキュリティレビュー

## 複数資格対応機能フェーズ

- [ ] 資格選択画面を実装（複数資格一覧表示）
- [ ] QuizContextに選択資格状態を追加
- [ ] questions.jsonに certification フィールドを追加
- [ ] ホーム画面を資格対応に更新
- [ ] クイズ画面を資格寯忼に更新
- [ ] 結果画面を資格寯忼に更新
- [ ] 統計画面を資格寯忼に更新
- [ ] 複数資格寯忼機能のテスト実装
- [ ] Expo Go で複数資格寯忼機能をテスト

## Vercel公開準備フェーズ

- [ ] GitHubリポジトリにコードをプッシュ
- [ ] Vercelアカウント作成
- [ ] Vercelでプロジェクト連携
- [ ] 環境変数設定（API_URL等）
- [ ] ビルド設定確認
- [ ] 本番環境でのテスト
- [ ] カスタムドメイン設定（オプション）
- [ ] PWA化（ホーム画面追加対応）

## SSO ログイン機能実装フェーズ

- [x] ログイン画面コンポーネント実装
- [x] 認証状態に応じた画面分岐を実装
- [x] Salesforce OAuth エンドポイントへのリダイレクト処理
- [x] ホーム画面にログアウトボタン追加
- [x] Google・Microsoft・メールアドレスの複数ログイン方法を実装
- [ ] Expo Go でテスト

## OAuth・ログイン機能拡張フェーズ

- [x] Google OAuth API 連携実装
- [x] Microsoft OAuth API 連携実装
- [x] メールアドレスログイン API 実装
- [x] アカウント作成 API 実装
- [x] パスワードリセット画面実装
- [x] パスワードリセット API 実装
- [ ] メール送信機能実装（バックエンド）
- [ ] Expo Go でテスト

## OAuth バックエンド実装フェーズ

- [ ] Google OAuth エンドポイント実装
- [ ] Microsoft OAuth エンドポイント実装
- [ ] expo-web-browser を使用した OAuth ログイン実装
- [ ] OAuth コールバック処理実装
- [ ] Expo Go でテスト

## メール認証システム実装フェーズ

- [x] データベーススキーマ拡張（passwordHash、passwordResetTokens）
- [x] バックエンド API エンドポイント実装（email-login、signup、password-reset）
- [x] パスワード暗号化（crypto.scrypt）
- [x] JWT セッション管理実装
- [x] フロントエンド useAuth フック実装
- [x] ログイン画面実装（StyleSheet）
- [x] アカウント作成画面実装
- [ ] **ログアウト後の再ログイン問題を修正** ← 現在のタスク
- [ ] セッショントークンの永続化とリフレッシュ機能
- [ ] Expo Go での完全なテスト（ログイン→ホーム→ログアウト→再ログイン）
